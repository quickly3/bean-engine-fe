<app-nav></app-nav>

<div class="container article-list">
  <div class="header d-flex align-items-center justify-content-between">
    <div class="title">文章列表</div>
    <div class="search-box">
      <input
        type="text"
        class="form-control"
        placeholder="按标题/摘要/作者搜索，回车查询"
        [(ngModel)]="keywords"
        (keydown)="onSearchKey($event)"
      />
    </div>
  </div>

  <div class="meta mb-2">
    找到 <strong>{{ total }}</strong> 条结果 （用时约
    <strong>{{ took }}</strong> ms） 当前第 <strong>{{ page }}</strong> 页
  </div>

  <div *ngIf="loading" class="text-center my-4">加载中...</div>

  <div class="row g-3">
    <div class="col-12 col-md-6 col-lg-4" *ngFor="let a of articles">
      <article class="card article-card">
        <div class="card-body">
          <h5 class="card-title">
            <a [href]="a.url || '#'" target="_blank">{{ a.title || '—' }}</a>
          </h5>
          <div class="info">
            <span class="author">作者：
              <a [href]="a.author_url || '#'" target="_blank">{{ a.author || '匿名' }}</a>
            </span>
            <span class="dot">·</span>
          </div>
        </div>
        <div class="card-footer d-flex justify-content-between align-items-center">
          <div class="tags">
            <span class="badge bg-light text-muted">{{ a.category }}</span>
            <span *ngIf="a.tag" class="badge bg-light text-muted">{{ a.tag }}</span>
          </div>
          <div class="stats text-muted">
            <small>播放 {{ a.play || 0 }}</small>
            <small class="ms-2">评论 {{ a.comment || 0 }}</small>
            <small class="ms-2">{{ a.createdStr }}</small>
          </div>
        </div>
      </article>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-4">
    <ngb-pagination
      [collectionSize]="total"
      [(page)]="page"
      [pageSize]="pageSize"
      [maxSize]="5"
      [ellipses]="false"
      size="sm"
      (pageChange)="pageChange($event)"
    ></ngb-pagination>
  </div>
</div>
